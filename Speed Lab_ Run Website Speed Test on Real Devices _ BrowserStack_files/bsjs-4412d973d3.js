!function(t){function e(e,r,a){var o=this;return this.on("click.pjax",e,function(e){var i=t.extend({},m(r,a));i.container||(i.container=t(this).attr("data-pjax")||o),n(e,i)})}function n(e,n,r){r=m(n,r);var o=e.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==o.protocol||location.hostname!==o.hostname||o.href.indexOf("#")>-1&&h(o)==h(location)||e.isDefaultPrevented())){var i={url:o.href,container:t(o).attr("data-pjax"),target:o},c=t.extend({},i,r),s=t.Event("pjax:click");t(o).trigger(s,[c]),s.isDefaultPrevented()||(a(c),e.preventDefault(),t(o).trigger("pjax:clicked",[c]))}}function r(e,n,r){r=m(n,r);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var i={type:o.method.toUpperCase(),url:o.action,container:t(o).attr("data-pjax"),target:o};if("GET"!==i.type&&void 0!==window.FormData)i.data=new FormData(o),i.processData=!1,i.contentType=!1;else{if(t(o).find(":file").length)return;i.data=t(o).serializeArray()}a(t.extend({},i,r)),e.preventDefault()}function a(e){function n(e,n,a){a||(a={}),a.relatedTarget=r;var o=t.Event(e,a);return c.trigger(o,n),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,a.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=e.target,o=d(e.url).hash,c=e.context=v(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:c.selector}):e.data._pjax=c.selector;var s;e.beforeSend=function(t,r){if("GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",c.selector),!n("pjax:beforeSend",[t,r]))return!1;r.timeout>0&&(s=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0);var a=d(r.url);o&&(a.hash=o),e.requestUrl=f(a)},e.complete=function(t,r){s&&clearTimeout(s),n("pjax:complete",[t,r,e]),n("pjax:end",[t,e])},e.error=function(t,r,a){var o=j("",t,e),c=n("pjax:error",[t,r,a,e]);"GET"==e.type&&"abort"!==r&&c&&i(o.url)},e.success=function(r,s,u){var p=a.state,f="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=u.getResponseHeader("X-PJAX-Version"),m=j(r,u,e),v=d(m.url);if(o&&(v.hash=o,m.url=v.href),f&&h&&f!==h)return void i(m.url);if(!m.contents)return void i(m.url);a.state={id:e.id||l(),url:m.url,title:m.title,container:c.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(a.state,m.title,m.url);var x=t.contains(e.container,document.activeElement);if(x)try{document.activeElement.blur()}catch(g){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,e],{state:a.state,previousState:p}),c.html(m.contents);var w=c.find("input[autofocus], textarea[autofocus]").last()[0];w&&document.activeElement!==w&&w.focus(),y(m.scripts);var b=e.scrollTo;if(o){var T=decodeURIComponent(o.slice(1)),E=document.getElementById(T)||document.getElementsByName(T)[0];E&&(b=t(E).offset().top)}"number"==typeof b&&t(window).scrollTop(b),n("pjax:success",[r,s,u,e])},a.state||(a.state={id:l(),url:window.location.href,title:document.title,container:c.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(a.state,document.title)),u(a.xhr),a.options=e;var h=a.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(w(a.state.id,p(c)),window.history.pushState(null,"",e.requestUrl)),n("pjax:start",[h,e]),n("pjax:send",[h,e])),a.xhr}function o(e,n){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return a(t.extend(r,m(e,n)))}function i(t){window.history.replaceState(null,"",a.state.url),window.location.replace(t)}function c(e){C||u(a.xhr);var n,r=a.state,o=e.state;if(o&&o.container){if(C&&A==o.url)return;if(r){if(r.id===o.id)return;n=r.id<o.id?"forward":"back"}var c=R[o.id]||[],s=t(c[0]||o.container),l=c[1];if(s.length){r&&b(n,r.id,p(s));var f=t.Event("pjax:popstate",{state:o,direction:n});s.trigger(f);var d={id:o.id,url:o.url,container:s,push:!1,fragment:o.fragment,timeout:o.timeout,scrollTo:!1};if(l){s.trigger("pjax:start",[null,d]),a.state=o,o.title&&(document.title=o.title);var h=t.Event("pjax:beforeReplace",{state:o,previousState:r});s.trigger(h,[l,d]),s.html(l),s.trigger("pjax:end",[null,d])}else a(d);s[0].offsetHeight}else i(location.href)}C=!1}function s(e){var n=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",a=t("<form>",{method:"GET"===r?"GET":"POST",action:n,style:"display:none"});"GET"!==r&&"POST"!==r&&a.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,n){var r=n.split("=");a.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if(t.isArray(o))t.each(o,function(e,n){a.append(t("<input>",{type:"hidden",name:n.name,value:n.value}))});else if("object"==typeof o){var i;for(i in o)a.append(t("<input>",{type:"hidden",name:i,value:o[i]}))}t(document.body).append(a),a.submit()}function u(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function l(){return(new Date).getTime()}function p(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function f(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function d(t){var e=document.createElement("a");return e.href=t,e}function h(t){return t.href.replace(/#.*/,"")}function m(e,n){return e&&n?n.container=e:n=t.isPlainObject(e)?e:{container:e},n.container&&(n.container=v(n.container)),n}function v(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function x(t,e){return t.filter(e).add(t.find(e))}function g(e){return t.parseHTML(e,document,!0)}function j(e,n,r){var a={},o=/<html/i.test(e),i=n.getResponseHeader("X-PJAX-URL");if(a.url=i?f(d(i)):r.requestUrl,o)var c=t(g(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),s=t(g(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var c=s=t(g(e));if(0===s.length)return a;if(a.title=x(c,"title").last().text(),r.fragment){if("body"===r.fragment)var u=s;else var u=x(s,r.fragment).first();u.length&&(a.contents="body"===r.fragment?u:u.contents(),a.title||(a.title=u.attr("title")||u.data("title")))}else o||(a.contents=s);return a.contents&&(a.contents=a.contents.not(function(){return t(this).is("title")}),a.contents.find("title").remove(),a.scripts=x(a.contents,"script[src]").remove(),a.contents=a.contents.not(a.scripts)),a.title&&(a.title=t.trim(a.title)),a}function y(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src,r=n.filter(function(){return this.src===e});if(!r.length){var a=document.createElement("script"),o=t(this).attr("type");o&&(a.type=o),a.src=t(this).attr("src"),document.head.appendChild(a)}})}}function w(t,e){R[t]=e,X.push(t),T(U,0),T(X,a.defaults.maxCacheLength)}function b(t,e,n){var r,o;R[e]=n,"forward"===t?(r=X,o=U):(r=U,o=X),r.push(e),(e=o.pop())&&delete R[e],T(r,a.defaults.maxCacheLength)}function T(t,e){for(;t.length>e;)delete R[t.shift()]}function E(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function S(){t.fn.pjax=e,t.pjax=a,t.pjax.enable=t.noop,t.pjax.disable=P,t.pjax.click=n,t.pjax.submit=r,t.pjax.reload=o,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:!1,maxCacheLength:20,version:E},t(window).on("popstate.pjax",c)}function P(){t.fn.pjax=function(){return this},t.pjax=s,t.pjax.enable=S,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",c)}var C=!0,A=window.location.href,D=window.history.state;D&&D.container&&(a.state=D),"state"in window.history&&(C=!1);var R={},U=[],X=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?S():P()}(jQuery);
!function(){var n;"performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0&&(n=Date.now(),performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n})}();
var Payment={DEBUG:!1,startIframeLoadTime:0,isLoggingIframeLoadingTime:!1,loadingInterval:null,loadingIntervalCount:0,LOADING_INTERVAL_THRESHOLD:3e3,initialize:function(){Payment.formUiEvents(),Payment.formSubmitHandler(),Payment.onOrderSubmit(),viewCalculations(".sel-plan"),Payment.stripeElementsInit()},logStripeResponse:function(e,t){"undefined"==typeof t&&(t={}),Payment.DEBUG&&console.log(e,t),t.message=e;var r=Config.generate_url("/orders/log_stripe_response","accounts");jQuery.ajax({url:r,type:"POST",data:t,beforeSend:function(e){e.setRequestHeader("Accept","application/json")}})},pushStats:function(e){if(!(Payment.oneTimeCheckout&&"invalid"==Payment.otpTokenStatus||"undefined"==typeof e)){Payment.DEBUG&&console.log(e);var t=Config.generate_url("/orders/push_stats","accounts");jQuery.ajax({url:t,type:"POST",data:e,beforeSend:function(e){e.setRequestHeader("Accept","application/json")}})}},getButtonText:function(){var e=$(".update-card-modal").length>0?"Update":"Buy Now";$(".one-time-purchase-button").length&&(e="Purchase");var t="Update"===e?"Updating...":"Processing...";return[e,t]},formSubmitHandler:function(){$("#update-billing-details").submit(function(){jQuery(".mfp-close").bind("click",!1)}),jQuery(document).on("ajax:beforeSend","#payment-form, #update-card",function(e,t){Payment.disableUpsellNudge(),t.setRequestHeader("Accept","text/javascript, application/json")}),jQuery("body").on("submit","#payment-form, #update-card",function(e,t){var r,a,n,o,s=Payment.getButtonText();inlineError.removeErrors(".payment-details");var i=jQuery(this).find("input[type=submit]"),d={cardName:jQuery("#card-name"),country:jQuery("#card-address-country"),zipCode:jQuery("#card-address-zip")},c={};for(a in d)if(Object.prototype.hasOwnProperty.call(d,a))if(n={data:c,url:window.location.pathname,kind:"upfront-"+a,error:"Got error response from Stripe",category:"StripeCheckoutIframe"},"country"==a){if(d[a].length&&!d.country.val())return c.key="creditCardCountry",c.code="creditCardCountry",c.message=Payment.customStripeMessages("country_required"),inlineError.showError(d.country,Payment.customStripeMessages("country_required"),!0),Payment.logStripeResponse("Got error response from Stripe"+JSON.stringify(c),c),Payment.pushStats(n),!1}else if(o=d[a].val(),d[a].length&&!o.trim())return c.key=a+"_required",c.code=a+"_required",c.message=Payment.customStripeMessages(a+"_required"),inlineError.showError(d[a],Payment.customStripeMessages(a+"_required"),!0),Payment.logStripeResponse("Got error response from Stripe"+JSON.stringify(c),c),Payment.pushStats(n),!1;if(jQuery(".mfp-close").bind("click",!1),Payment.disableBillingCycle(!0),i.length>0&&i.prop("disabled","disabled").val(s[1]).addClass("disabled"),Payment.logStripeResponse("Form submit called"),t)return Payment.logStripeResponse("Form submit direct"),!0;"update-card"==this.id&&Analytics.ga("send","pageview",{page:"/update-credit-card"}),Payment.showLoader(!0,Payment.cardUpdateRequest?Messages.updatingCardDetails:Messages.processingStripePayment);var l=$(this);l.find("#update_card_button").prop("disabled",!0).val(s[1]),Payment.logStripeResponse("Send request to stripe");var u={address_zip:$("#card-address-zip").val(),name:$("#card-name").val(),address_country:$("#card-address-country").val()};try{jQuery(".pay-as-you-go-submit").prop("disabled","disabled").text("Processing..."),stripeGlobalObject.createToken(Payment.cardNumber,u).then(Payment.stripeResponseHandler)}catch(p){if(jQuery(".pay-as-you-go-submit").prop("disabled",!1).text("Buy Now"),"undefined"==typeof Stripe)r={send_email:!0,error:"Stripe JS did not load."},Payment.logStripeResponse("Got error on creating stripe token",r);else try{r={send_email:!0,originalMessage:p.message,error:p.stack},Payment.logStripeResponse("Got error on creating stripe token",r)}catch(m){r={send_email:!0,error:p,newError:m},Payment.logStripeResponse("Got error on creating stripe token",r)}l.find(".update-card-alert, .payment-errors").addClass("show alert-error").removeClass("hide alert-success").find("span").html("Seems like some browser extension is blocking payment to go through, please try from a different browser"),l.find("button").prop("disabled",!1),i.prop("disabled",!1).val(s[0]).removeClass("disabled"),l.find("#update_card_button").prop("disabled",!1).val(s[0]),l.find(".payment-spinner").hide(),Payment.disableBillingCycle(!1)}return jQuery(".mfp-close").unbind("click",!1),!1})},stripeResponseHandler:function(e){var t,r,a,n,o,s,i,d,c,l,u=Payment.getButtonText(),p={response:e};Payment.logStripeResponse("Got response from stripe",p);var m=$("#payment-form, #update-card"),y=$("#order-form"),g=m.find("input[type=submit]");if(e.error)n="",WebEventTracker.logEvent([],EDS.webEvents,"PaymentUpdateFormSubmittedFailed",{}),Payment.showLoader(!1),g.prop("disabled",!1).val(u[0]).removeClass("disabled"),jQuery(".pay-as-you-go-submit").prop("disabled",!1).text("Buy Now"),$.getJSON(Config.generate_url("/collect_data","accounts"),{error:e.error.message,category:"payment",kind:"card-declined-frontend",user_browser:$.browser.name,user_browser_version:$.browser.version,user_os:$.os.name,data:JSON.stringify(e)}),o=e.error.code,s={key:o,code:o,message:e.message},inlineError.removeErrors("#payment-tabs"),inlineError.removeErrors("#update-card-modal"),i={cardNumber:$("#stripe_card_number"),cardExpiry:$("#stripe_card_expiry"),cardCVV:$("#stripe_card_cvc")},d=window.location.pathname,o.match(/number/)?(inlineError.showError(i.cardNumber,Payment.customStripeMessages(o),!0),n="cardNumber"):o.match(/expiry/)?(inlineError.showError(i.cardExpiry,Payment.customStripeMessages(o),!0),n="cardExpiry"):o.match(/cvc/)?(inlineError.showError(i.cardCVV,Payment.customStripeMessages(o),!0),n="cardCVV"):n=o,s.message=Payment.customStripeMessages(o),Payment.logStripeResponse("Got error response from Stripe"+JSON.stringify(s),s),a={data:s,url:d,kind:"upfront-"+n,error:"Got error response from Stripe",category:"StripeCheckoutIframe"},Payment.pushStats(a),m.find("button").prop("disabled",!1),m.find("#update_card_button").prop("disabled",!1).val(u[0]),y.find(".btn-secondary").removeAttr("disabled"),Payment.disableBillingCycle(!1);else{if(c=e.token,l=[c.card.name,c.card.brand,c.card.last4,c.card.exp_month,c.card.exp_year,c.card.address_country,c.card.address_zip].filter(function(e){return null!=e}).join("-"),OFAC_COUNTRIES.includes(COUNTRIES_CODE3[c.card.country])||OFAC_COUNTRIES.includes(COUNTRIES_CODE3[c.card.address_country]))return jQuery.bsAlert.alert({text:Messages.ofacBlockMessage,alertType:"error",htmlMessage:!0}),Payment.showLoader(!1),g.prop("disabled",!1).val(u[0]).removeClass("disabled"),jQuery(".pay-as-you-go-submit").prop("disabled",!1).text("Buy Now"),m.find("button").prop("disabled",!1),m.find("#update_card_button").prop("disabled",!1).val(u[0]),y.find(".btn-secondary").removeAttr("disabled"),Payment.disableBillingCycle(!1),s={key:"ofac_blocked_card",code:"ofac_blocked_card",message:Messages.ofacBlockMessage},d=window.location.pathname,a={data:s,url:d,kind:"upfront-blockedCountry",error:"Got error response from Stripe",category:"StripeCheckoutIframe"},void Payment.pushStats(a);r=$("[name='stripeToken']"),r.length?r.val(c.id):m.append($('<input type="hidden" name="stripeToken" />').val(c.id)),"undefined"!=typeof User&&"undefined"!=typeof User.gaCID&&m.append($('<input type="hidden" name="gaCID" />').val(User.gaCID)),t=$("[name='cardDetails']"),t.length?t.val(l):m.append($('<input type="hidden" name="cardDetails" />').val(l)),Payment.logStripeResponse("attached token to form",{token:c}),0===m.find('input[name="authenticity_token"]').length&&m.append($('<input type="hidden" name="authenticity_token" />').val(authToken)),m.trigger("submit",!0)}},disableBillingCycle:function(e){$("#billing-cycle-dropdown").length>0&&$("#billing-cycle-dropdown").attr("disabled",e).trigger("chosen:updated"),$("#license-dropdown").length&&$("#license-dropdown").attr("disabled",e).trigger("chosen:updated"),$("#recommend_plan").length>0&&$("#recommend_plan").attr("disabled",e).trigger("chosen:updated")},showLoader:function(e,t){var r=$(".cc-overlay");r.find("p").text(t||""),e?r.removeClass("hide"):r.addClass("hide");var a=$("#cardSubmitSideLane");e?a.attr("disabled",!0):a.attr("disabled",!1)},customStripeMessages:function(e){var t={cardName_required:"Enter the name on your Card",zipCode_required:"Enter a valid ZIP code",incorrect_number:"Invalid card number",creditCardNumber:"Invalid card number",invalid_expiry_year:"Invalid date",invalid_expiry_month:"Invalid date",invalid_cvc:"Invalid security code",cardSecurityCode:"Invalid security code",invalid_number:"Invalid card number",country_required:"Select a country",incomplete_number:"Invalid card number",incomplete_expiry:"Enter a valid expiry date",creditCardExpirationYear:"Enter a valid expiry date",creditCardExpirationMonth:"Invalid expiry date",incomplete_cvc:"Enter a valid CVV",invalid_expiry_month_past:"Invalid date",invalid_expiry_year_past:"Invalid date",test_mode_live_card:"Invalid test card"};return t[e]},extractAppropriateMessage:function(e){return"The 'exp_month' parameter should be an integer (instead, is ab)."==e?Messages.card.invalidExpiryMonth:"The 'exp_year' parameter should be an integer (instead, is ab)."==e?Messages.card.invalidExpiryYear:"Your card was declined."==e?Messages.cardError:e},disableUpsellNudge:function(){$(".upsell-container").addClass("upsell-disabled")},enableUpsellNudge:function(){$(".upsell-container").removeClass("upsell-disabled")},onOrderSubmit:function(){jQuery("body").on("ajax:before","#order-form",function(){Payment.disableUpsellNudge(),Payment.logStripeResponse("No request to stripe direct submit"),Payment.showLoader(!0,Payment.cardUpdateRequest?Messages.updatingCardDetails:Messages.processingZuoraPayment),Payment.disableBillingCycle(!0)}),jQuery("body").on("ajax:beforeSend","#order-form",function(e,t,r){"undefined"!=typeof User.gaCID&&(r.data=r.data+"&&gaCID="+User.gaCID)});var e=$("#checkoutPayment"),t=$(".checkout-payment-wrapper").length;jQuery("body").on("ajax:success","#order-form, #payment-form",function(r,a){var n,o;n=$(this),a.success===!0?(Payment.showLoader(!1),$(".side-feature-section").addClass("hide"),$(".checkout-form").addClass("hide"),$("#checkout-payment-survey").addClass("hide"),$("#checkout-payment-success").addClass("hide"),$(".cards-section").addClass("hide"),$("#checkoutSuccess, .checkout-response-wrapper.payment-successful, #invoice-download-note").removeClass("hide"),$("#checkoutInvoicesPath").removeClass("hide"),e.find(".success-icon").removeClass("disabled"),$("#checkoutReview").removeClass("show").addClass("hide"),e.removeClass("show").addClass("hide"),$("#checkoutSignin").removeClass("show").addClass("hide"),$(".pricing-link").addClass("hide"),$(".alert-error").removeClass("show").addClass("hide"),t&&($(".checkout-wrapper").addClass("hide"),Payment.enableBsLogo()),Analytics.sendDataToGAWithPricingVersion("Checkout","CtaClick","Purchase"),a&&a.meta_data&&(Analytics.payment(function(){a.first_purchase&&Analytics.ga("send","pageview",{page:"/first-purchase"})},a.meta_data),Cookie.create("p_buy",!0,90)),window._vis_opt_queue=window._vis_opt_queue||[],window._vis_opt_queue.push(function(){_vis_opt_goal_conversion(201)})):a.success===!1&&(a.is_subscription_amount_change&&void 0!=a.is_subscription_amount_change&&a.is_subscription_amount_change===!0?jQuery.bsAlert.alert({text:a.error,alertType:"success",htmlMessage:!0}):jQuery.bsAlert.alert({text:a.errorMessage||a.error,alertType:"error",htmlMessage:!0}),Payment.showLoader(!1),Payment.disableBillingCycle(!1),Payment.enableUpsellNudge(),o=Payment.getButtonText(),$("#cardSubmit",n).prop("disabled",!1).val(o[0]).removeClass("disabled")),"payment_done"==a.error&&($(".checkout-form, .checkout-wrapper, .side-feature-section, .payment-done, #checkout-payment-survey, #checkout-payment-success").addClass("hide"),Payment.enableBsLogo())}),jQuery("body").on("ajax:error","#order-form, #payment-form",function(e,t){jQuery(".mfp-close").unbind("click",!1),401===t.status&&(window.location=Config.generate_url("/users/sign_in"))}),jQuery("body").on("ajax:success",".payment-form-pay-go",function(e,t){t.success&&(WebEventTracker.logEvent([],EDS.webEvents,"CreditCardPreAuth_NewCheckoutPage",{}),$(".left-section, .right-section").addClass("hide"),$("#checkoutSuccess").removeClass("hide"))}),jQuery("body").on("ajax:error",".payment-form-pay-go",function(e,t){jQuery(".pay-as-you-go-submit").prop("disabled",!1).text("Buy Now"),jQuery.bsAlert.alert({text:t.responseJSON&&t.responseJSON.errors&&t.responseJSON.errors[0],htmlMessage:!0,alertType:"error"})}),jQuery("body").on("ajax:success",".switch-to-annual-modal #order-form",function(e,t){t.success&&(Analytics.ga("send","pageview",{page:"/ga-switch-to-annual"}),MagnificPopupBindings.updateSubscriptionSuccess(!0,t))}),jQuery("body").on("click",".mfp-upgrade-modal-close ",function(){jQuery.magnificPopup.close({items:{src:jQuery("#cart-modal")},type:"inline",closeOnBgClick:!1,enableEscapeKey:!1,showCloseBtn:!1})}),jQuery("body").on("ajax:success",".upgrade-modal #order-form",Payment.handleUpgradeModalOrderForm),jQuery("body").on("ajax:success",".upgrade-modal #new-order-form",Payment.handleUpgradeModalOrderForm),jQuery("body").on("click",".upgrade-modal #new-order-form-submit",function(){$(".new-modal-close-button").attr("disabled",!0);var e=$("input:radio.new-modal-radio"),t=$(".new-modal-table");e.attr("disabled",!0),t.off()})},handleUpgradeModalOrderForm:function(e,t){var r,a,n,o,s,i,d;jQuery(".mfp-close").unbind("click",!1),t.success?(r={},a=$(".new-modal-table-selected"),a.length>0&&a.is(":visible")&&(n="Option1",$(".new-modal-table-selected").hasClass("shift-up-two")&&(n="Option2"),r["Configuration chosen"]=n),WebEventTracker.logEvent([],EDS.webEvents,"SuccessfulUpgrade_UpgradeModal_manage-users-tab",r),jQuery.magnificPopup.close({items:{src:jQuery("#cart-modal")},type:"inline",closeOnBgClick:!1,enableEscapeKey:!1,showCloseBtn:!1}),ManagePeople.notifyInviteResponse(t.message,"success"),o=ManagePeople.selectedProduct,s=$("#copy-invite-link"),1==s.data("has-clicked")?(i=jQuery(".pjax-account").find(".manage-accounts-overlay"),i.remove(),jQuery.bsAlert.alert({text:"Your plan has been updated and Invite link copied to clipboard successfully",alertType:"success"}),s.data("has-clicked",!1)):o&&o.length>0?($(o).prop("checked",!0),ManagePeople.changeProductAccess($(o)),ManagePeople.selectedProduct=null):(d={},d.from="purchase_modal",ManagePeople.addUser($("#invite_to_group"),d),Analytics.sendDataToGA("Organisation","ClickInvite","InviteTeam_Email"))):ManagePeople.notifyInviteResponse(t.message,"error")},enableBsLogo:function(){var e=$("<a>").attr("href","/dashboard");$(".checkout-logo img").wrap(e)},logPricingActivity:function(e){var t,r=document.URL;"undefined"!=typeof CheckoutUser&&(t=CheckoutUser.current_user_id);var a="month"==$(".combined-plan-cycle").find("option:selected").val()?"monthly":"annual",n=$(".prod-name").text().replace(" plan",""),o=parseInt($("#plan_id").find("option:selected").val(),10),s=parseInt($("#plan_id").find("option:selected").attr("data-user-count"),10),i=Cookie.read("tracking_id");CombinedPricingActivity.logEvent(e,r,t,n,o,s,a,i,"combined","v2")},logOldPricingActivity:function(e){var t,r=document.URL;"undefined"!=typeof CheckoutUser&&(t=CheckoutUser.current_user_id);var a=Cookie.read("tracking_id");CombinedPricingActivity.logEvent(e,r,t,null,null,null,null,a,null,"v1")},formUiEvents:function(){$(".cc-links").click(function(){var e;e="Current card"==$(this).text()?"select_current_card":"select_new_card",$(".checkout-form").hasClass("new-checkout-form")?Payment.logPricingActivity(e):Payment.logOldPricingActivity(e),$(".cc-links").removeClass("sel"),$(this).addClass("sel"),$(".cc-forms").hide(),$("."+$(this).data("form")).show()}),jQuery("body").on("keypress",".paymentNumber",function(e){var t,r=this.selectionStart,a=this.selectionEnd,n=$(this).val(),o=r!==a;n.length<19&&r<n.length&&!o&&(n=n.substring(0,r)+"~"+n.substring(r));var s=n.replace(/ /g,""),i=[];for(t=0;t<s.length;t+=4)i.push(s.substring(t,t+4));var d=function(){return 8===e.which?"":i.length>0&&4===i[i.length-1].length&&4!==i.length?" ":""}();i=i.join(" ")+d," "===i.substr(r,1)?r+=1:o&&(i=i.substring(0,r)+i.substring(a)),i=i.replace(/~/g,""),$(this).val(i),this.setSelectionRange(r,r);var c=Stripe.cardType(n);"American Express"==c&&(c="amex")}),jQuery("body").on("input",".paymentExpiryDate",function(){var e,t,r,a=$(this).val(),n=this.selectionStart,o=a.substr(this.selectionStart-1,1);"/"===o&&2===a.length&&"0"!=a.substr(0,1)?(a="0"+a,n+=1):2===a.length&&void 0==a.match(/\//)?(a=a.substr(0,2)+"/"+a.substr(2),n+=1):o.match(/[0-9]/)||(e=this.selectionStart-1,a=a.substr(0,e)+a.substr(e+1),4===a.length&&void 0==a.match(/\//)&&(a=a.substr(0,2)+"/"+a.substr(2,2)),n-=1),a&&(t=a.split("/")[0],r=a.split("/")[1],$(".paymentExpiryMonth").val(t),$(".paymentExpiryYear").val(r)),$(this).val(a),this.setSelectionRange(n,n)}),jQuery("body").on("keyup",".paymentExpiryDate",function(e){var t=String.fromCharCode(e.which),r=t.match(/\d/)?this.value+String.fromCharCode(e.which):this.value;8===e.which?("/"===r.substr(-1)&&$(this).val(r.substr(0,1)),null===r.match(/\//)&&""!==r&&$(this).val(r.substr(0,2)+"/"+r.substr(2))):isNaN(r)||r>1&&r<10&&1===r.length&&$(this).val("0")}),jQuery(document).on("click",".mfp-close",function(){var e=$(this).closest("form");e.length>0&&(e[0].reset(),inlineError.removeErrors(".payment-details"))}),jQuery(".pay-as-you-go-submit").click(function(){WebEventTracker.logEvent([],EDS.webEvents,"PurchaseCTA_NewCheckoutPage",{})}),jQuery(".pay-as-you-go-invite-btn").click(function(){WebEventTracker.logEvent([],EDS.webEvents,"PostPurchase_InviteYourTeam",{})}),jQuery(".pay-as-you-go-live").click(function(){WebEventTracker.logEvent([],EDS.webEvents,"PostPurchase_Live",{})}),jQuery(".pay-as-you-go-automate").click(function(){WebEventTracker.logEvent([],EDS.webEvents,"PostPurchase_Automate",{})}),jQuery(document).on("click","#stripe-update-card-modal",function(){Payment.stripeElementsInit(),WebEventTracker.logEvent(["amplitude"],EDS.webEvents,"UpdateCreditCardModalShown",{utm_content:getURLParameter("utm_content")})})},performanceStart:function(){var e,t=window.location.pathname;"undefined"!=typeof performance&&"function"==typeof performance.now&&(Payment.startIframeLoadTime=performance.now(),Payment.isLoggingIframeLoadingTime=!0,e={data:Date.now(),url:t,kind:"Stripe iFrame Load Start at",category:"StripeCheckoutIframe"},Payment.pushStats(e)),Payment.loadingIntervalCount=0,Payment.loadingInterval&&clearInterval(Payment.loadingInterval),Payment.loadingInterval=setInterval(function(){Payment.loadingIntervalCount+=1;var e=Payment.LOADING_INTERVAL_THRESHOLD*Payment.loadingIntervalCount,r={data:e,url:t,kind:"Stripe iFrame not loaded after",category:"StripeCheckoutIframe"};Payment.pushStats(r),3===Payment.loadingIntervalCount&&clearInterval(Payment.loadingInterval)},Payment.LOADING_INTERVAL_THRESHOLD)},performanceIframeEnd:function(){var e,t;"undefined"!=typeof performance&&"function"==typeof performance.now&&Payment.startIframeLoadTime>0&&(t=Math.round(performance.now()-Payment.startIframeLoadTime),e={data:t,url:window.location.pathname,kind:"Stripe iFrame Load Time delta in ms",category:"StripeCheckoutIframe"},Payment.pushStats(e),Payment.isLoggingIframeLoadingTime=!1),clearInterval(Payment.loadingInterval)},disableFields:function(e){var t=Payment.getButtonText(),r=$(".new-card-form").find("#cardSubmit");e?r.text(t[1]).addClass("disabled"):r.text(t[0]).removeClass("disabled"),Payment.disableBillingCycle(e)},isStripeRequired:function(){var e,t=window.location.pathname,r=/accounts\/subscriptions/,a=r.test(t),n=["/pricing","/accounts/subscriptions","/acounts/billing","/accounts/profile","/accounts/integrations","/accounts/settings","/accounts/manage-users","/orders/process-payment-auth","/orders/sca-checkout-success","/accounts/get-invoice-pdf","/accounts/settings/sso","/accounts/settings/user-provisioning","/accounts/network-panel","/issue-history","/accounts/settings/suggest-sso-configuration"];if("undefined"==typeof CheckoutUser||n.indexOf(t)!=-1||a)return!1;var o=$(".checkout-payment-wrapper");return!(o.length>0&&(e=$(".checkout-payment-wrapper[data-token-status]").attr("data-token-status"),"valid"!=e))},stripeElementsInit:function(){var e=Payment.isStripeRequired();if(e){Payment.performanceStart();var t=stripeGlobalObject.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Source+Sans+Pro"}]}),r={base:{color:"#303238",fontSize:"16px",lineHeight:"21px",fontFamily:"Source Sans Pro",letterSpacing:"normal",":focus":{color:"#009cfc"}},invalid:{":focus":{color:"#e84e3c"}}};Payment.cardNumber=t.create("cardNumber",{style:r,placeholder:"●●●● ●●●● ●●●● ●●●●"}),Payment.cardExp=t.create("cardExpiry",{style:r,placeholder:"MM/YY"}),Payment.cardCvc=t.create("cardCvc",{style:r,placeholder:"●●●"}),Payment.cardNumber.mount("#stripe_card_number"),Payment.cardExp.mount("#stripe_card_expiry"),Payment.cardCvc.mount("#stripe_card_cvc"),Payment.cardNumber.on("change",function(e){$(".cart-brand-card").addClass("hide"),$(".cart-brand").find(".card-"+e.brand).removeClass("hide"),Payment.showStripeErrors(e,$("#stripe_card_number"))}),Payment.cardExp.on("change",function(e){Payment.showStripeErrors(e,$("#stripe_card_expiry"))}),Payment.cardCvc.on("change",function(e){Payment.showStripeErrors(e,$("#stripe_card_cvc"))}),Payment.elementsMounted=0,[Payment.cardCvc,Payment.cardExp,Payment.cardNumber].forEach(function(e){e.on("ready",Payment.onElementMounted)});var a=$(".StripeElement");Array.prototype.forEach.call(a,function(e){e.addEventListener("focus",function(){e.classList.add("StripeElement--focus")}),e.addEventListener("blur",function(){e.classList.remove("StripeElement--focus")})})}},showStripeErrors:function(e,t){inlineError.removeErrors(t.parent()),e.error&&inlineError.showError(t,Payment.customStripeMessages(e.error.code),!0)},onElementMounted:function(){Payment.elementsMounted+=1,3===Payment.elementsMounted&&($(".accounts-overlay").addClass("hide"),$("body").removeClass("accounts-hidden"),Payment.showLoader(!1),Payment.performanceIframeEnd(),"undefined"!=typeof CheckoutUser&&Payment.prepopulateCountryInStrip(CheckoutUser.country_code2))},prepopulateCountryInStrip:function(e){var t;t=jQuery(".country-list").find('[value="'+e+'"]'),t.length&&(t.addClass("selected"),jQuery("#original-card-address-country").attr("value",t[0].innerHTML),jQuery("#card-address-country").attr("value",e))}};
var SearchKnowledgeBase={submitContactForm:{},searchInProgress:!1,nextSearchQuery:null,init:function(){$("#search").keyup(function(){$(this).val().length>2?SearchKnowledgeBase.search($(this)):($("#alerts").html(""),$("#alerts").addClass("hide").removeClass("show"))}),SearchKnowledgeBase.contactInit(),$(".support-tags .tag-link").click(function(){SearchKnowledgeBase.categorize($(this))}),"undefined"!=typeof History&&History.Adapter&&History.Adapter.bind(window,"statechange",function(){var a=History.getState(),e=a.data.tag||window.location.search.split("?tag=")[1]||"general";void 0!=e&&SearchKnowledgeBase.categorize($(".support-tags .tag-link[data-tag="+e+"]"))})},search:function(a,e){if((void 0==e||""!=e.trim())&&""!=a.val().trim()){if(SearchKnowledgeBase.searchInProgress)return void(SearchKnowledgeBase.nextSearchQuery=a.val());SearchKnowledgeBase.searchInProgress=!0,SearchKnowledgeBase.nextSearchQuery=null,$.ajax({url:a.parents("form").attr("action"),type:"get",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript")},dataType:"script",data:{search:e||a.val()},success:function(){SearchKnowledgeBase.searchInProgress=!1,null!=SearchKnowledgeBase.nextSearchQuery&&SearchKnowledgeBase.search($("#search"),SearchKnowledgeBase.nextSearchQuery),a.val().length<=2&&($("#alerts").html(""),$("#alerts").addClass("hide").removeClass("show"))},error:function(){$("#alerts").html(""),$("#alerts").addClass("hide").removeClass("show")}})}},contactInit:function(){$("#alerts").on("click","#go_to_contact",function(){SearchKnowledgeBase.goToContact()});var a=$(window).width()<=1024;$(".small-contact-form input, .small-contact-form textarea").each(function(){a&&$(this).next().addClass("top").find(".arrow-left").removeClass("arrow-left").addClass("arrow-down")}),$("#contact-form").on("click",".contact-submit",function(){$("#contact-form .contact-submit").addClass("disabled").attr("disabled",!0).val("Sending..."),SearchKnowledgeBase.validateContact();var a,e=SearchKnowledgeBase.submitContactForm;for(a in e)if(0==e[a])return window.location.pathname.match(/contact/)?$("#contact-form .contact-submit").val("Send").removeClass("disabled").attr("disabled",!1):$("#contact-form .contact-submit").val("Send a help request").removeClass("disabled").attr("disabled",!1),!1;return $.ajax({url:$("#contact-form").attr("action"),type:"post",beforeSend:function(a){a.setRequestHeader("Accept","application/json")},data:$("#contact-form").serialize(),dataType:"json",success:function(a){a.success&&showNotification(a.notice,"success"),window.location.pathname.match(/contact/)?$("#contact-form .contact-submit").val("Send").removeClass("disabled").attr("disabled",!1):$("#contact-form .contact-submit").val("Send a help request").removeClass("disabled").attr("disabled",!1),0==$(".sign_out_link").length&&($("#name").val(""),$("#email").val("")),$("#message").val(""),$("#contact-form").find("input, textarea").trigger("focusout")},error:function(){window.location.pathname.match(/contact/)?$("#contact-form .contact-submit").val("Send").removeClass("disabled").attr("disabled",!1):$("#contact-form .contact-submit").val("Send a help request").removeClass("disabled").attr("disabled",!1)}}),!1})},goToContact:function(){$("#message").siblings(".placeholder").html("").css("z-index","-1"),$("#message").val($("#search").val()),$("#alerts").removeClass("show").addClass("hide"),$(".gotoalert").html(Messages.goToContactForm+"<span class='close'>x</span>"),$(".gotoalert").addClass("show alert-info").removeClass("hide alert-success"),""==$("#name").val()?$("#name").focus():""==$("#email").val()?$("#email").focus():$("#message").focus()},validateContact:function(){var a,e=SearchKnowledgeBase.submitContactForm;$("body").removeClass("error");for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&($("#"+a).removeClass("error"),$("#"+a).next().removeClass("show").addClass("hide").find(".msg-body span").html(""),delete e[a]);$("#email").val().indexOf("@")!=-1&&$("#email").val().indexOf(".")!=-1||(SearchKnowledgeBase.submitContactForm.email=!1,$("body").addClass("error"),$("#email").addClass("error"),$("#email").next().removeClass("hide").addClass("show").find(".msg-body span").html("Invalid Email")),""==$("#message").val()&&(SearchKnowledgeBase.submitContactForm.message=!1,$("body").addClass("error"),$("#message").addClass("error"),$("#message").next().removeClass("hide").addClass("show").find(".msg-body span").html("Add a message"))},categorize:function(a){var e;null==window.location.pathname.match(/\/support/)||null!=window.location.pathname.match(/\/search/)?window.location="/support?tag="+a.attr("data-tag"):($(".questions").css("opacity",.4),$(".tag-link").removeClass("sel"),a.addClass("sel"),e=a.attr("data-tag"),$(".questions ul").addClass("hide").removeClass("show"),$(".tag-heading").html(a.html()),$(".questions").find("ul[data-tag='"+e+"']").addClass("show").removeClass("hide"),$(".questions").css("opacity",1),"undefined"==typeof window.history.pushState?window.location.href="/support?tag="+e:History.pushState({tag:e},null,"/support?tag="+e))}};$(function(){SearchKnowledgeBase.init()});
var Account={init:function(){$("#account, #subscription, #automate_doc_link, #automate_doc_summary_link").bind("click.myModal",function(e){e.preventDefault(),$("div#ajax-modal").removeClass("hide");var a=$(this).prop("data-tab");Account.loadAccountInfo(function(){$(a).click()})}),$(document).on("click.myModaltab","#subscription",function(){var e=$(this).prop("data-tab");$(e).click()}),$("#myModal").on("hide",function(){$("#myModal .alert").addClass("hide").removeClass("show")})},showMessageAndReload:function(e){$("#ajax-modal").on("click","#payment-link",function(){$("#ajax-loading").addClass("hide").removeClass("show"),$("#myModal .modal-header, #myModal .modal-body").show(),$("#profile-link").click()}),$("#ajax-modal").on("click","#manage-users-link",function(){$("#ajax-loading").addClass("hide").removeClass("show"),$("#myModal .modal-header, #myModal .modal-body").show(),$("#manage-link").click()}),$("#myModal").one("hide",function(){$("#ajax-loading").addClass("hide").removeClass("show"),$("#myModal .modal-header, #myModal .modal-body").show(),$("#profile-link").click()}),Account.loadAccountInfo(function(){$("#myModal .modal-header, #myModal .modal-body").hide(),$("#myModal").append('<div class="align-center" style="background:#FAF1E7; height:100%; min-height:100%;" id="ajax-loading">'+e+"</div>")})},showModal:function(){$("#myModal").modal("show"),$("#ajax-modal").removeClass("hide").addClass("show")},loadAccountInfo:function(e){$.ajax({url:$("#account, #subscription").prop("data-href"),type:"get",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")},dataType:"script",success:function(){$(".error-msg").popover({html:!0,animation:!0,trigger:"manual"}),Payment.initialize(),User.editProfile(),$("input:checkbox:checked").each(function(){$(this).addClass("checked")}),e&&e()},error:function(){Messages.showAlertinFlash("startFailed",1e3)}})}};Account.init();var CancelPlan={init:function(){$("#ajax-modal").on("click",".load_cancel_plan",function(){$(".sub-accounts .curr-plan").removeClass("show").addClass("hide"),$(".sub-accounts .plans").removeClass("show").addClass("hide"),$(".plan-type-wrapper").removeClass("show").addClass("hide"),$("#cancel-plan-pnl").addClass("show").removeClass("hide"),$("#back_modal").removeClass("hide").addClass("show"),$("#back_modal").bind().click(function(){$(".sub-accounts .utility").click(),$("#back_modal").removeClass("show").addClass("hide"),$("#back_modal").unbind("click")})}),$("#ajax-modal").on("click","#cancel_plan",function(){if(!$(this).hasClass("disabled")){var e,a=window.confirm("Are you sure you want to cancel your current plan?");a&&($(this).prop("disabled",!0).addClass("disabled").html("Cancelling..."),e=$("#cancel_plan").prop("order_id"),CancelPlan.cancel(e))}})},cancel:function(e){$.getJSON("/"+BrowserStack.user.stripeOr2checkout+"/cancel_recurring?order_id="+e+"&reason="+escape($("#cancel-reason").val()),function(){var e='<img alt="Modal-spinner" src="/images/layout/tunnel-success.png" style="margin-top:150px;" width="80" height="80"><h3 style="margin-bottom:0;">'+Messages.cancelledPlan+'</h3><div><a href="/start">Go to dashboard</a></div>';Account.showMessageAndReload(e)}).error(function(){$(this).prop("disabled","").removeClass("disabled").html("Cancel"),alert("We encountered an error. Please contact support to get your plan cancelled")})}};CancelPlan.init();var ManagePeople={isCombinedTeam:$(".combined-product-checkbox").length,combinedProducts:{combined_product:["live_testing","automate","screenshot"],app_combined_product:["app_live_testing","app_automate"]},combinedProductsType:["combined_product","app_combined_product"],init:function(){$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Accept","application/json")}}),$(".pjax-account").on("submit","#invite_to_group",function(){return!1}),$(".pjax-account").on("click","#addMember",function(){var e={};return e.upgrade_modal_source="Invite CTA",ManagePeople.addUser($("#invite_to_group"),e),Analytics.sendDataToGA("Organisation","ClickInvite","InviteTeam_Email"),!1}),jQuery("body").on("click",".upgrade-modal #order-form-submit",function(){var e="UpgradeNowClicked_UpgradeModal_manage-users-tab";null!=window.location.host.match("live")&&(e="UpragdeNowClicked_InviteYourTeam_LiveDashboard"),WebEventTracker.logEvent([],EDS.webEvents,e,{}),jQuery(".mfp-close").bind("click",!1)}),jQuery(document).on("click",".mfp-close",function(){null==window.location.host.match("live")||$(this).hasClass("bs-modal-cancel")||jQuery(".invite-modal-overlay, .invite-modal").removeClass("hide")}),jQuery("body").on("click","#new-order-form-submit",function(){var e="UpgradeNowClicked_UpgradeModal_manage-users-tab",a="Option1";$(".new-modal-table-selected").hasClass("shift-up-two")&&(a="Option2"),WebEventTracker.logEvent([],EDS.webEvents,e,{"Configuration chosen":a}),jQuery(".mfp-close").bind("click",!1)}),jQuery("body").on("click","#contact_sales_new_modal_link",function(){var e="ContactSalesLinkClicked_UpgradeModal_manage-users-tab";WebEventTracker.logEvent([],EDS.webEvents,e,{}),jQuery(".mfp-close").bind("click",!1)}),$(".pjax-account").on("click",".input-append .add-role li",function(){ManagePeople.addRoleToNewInvite($(this))}),$(".pjax-account").on("click",".input-append .add-group li",function(){ManagePeople.addSubTeamToNewInvite($(this))}),$(".pjax-account").on("click",".in_group .user-role .pulldown li",function(){var e=$(this),a=$(this).find(".role-name").html();$.inArray(a,["User","Admin"])>=0?(ManagePeople.changeRole(e),$(".mfp-container").trigger("click")):"Owner"==a&&$(".pjax-account").on("click",".changeUserRole",function(){ManagePeople.changeRole(e),$(".mfp-container").trigger("click")})}),$(".pjax-account").on("click",".in_group .user-group .pulldown li",function(){ManagePeople.changeSubTeam($(this))}),$(".pjax-account").on("click",".manage_users_remove_user",function(e){e.preventDefault(),ManagePeople.removeUser($(this)),Analytics.sendDataToGA("Organisation","ClickRemove","ManageUsers")}),$(".pjax-account").on("click",".user-role, .user-group, .product-access",function(){var e=$(this).find(".pulldown");e.hasClass("show")?$(".pulldown").removeClass("show").removeProp("style"):($(".pulldown").removeClass("show"),e.addClass("show")),ManagePeople.showInlineError()}),$(".pjax-account").on("click",".product-checkbox",function(){ManagePeople.changeProductDropDownLabel()}),$(".pjax-account").on("click",".combined-product-checkbox",function(){var e=$(this);$(".pjax-account").find("."+e.attr("id")+"_list [type=checkbox]").each(function(){$(this).prop("checked",!$(this).prop("checked"))}),ManagePeople.changeProductDropDownLabel()}),$(".pjax-account").on("click",".select-product",function(e){e.stopPropagation()}),$("body").click(function(e){var a;"/accounts/manage-users"==window.location.pathname&&(e||(e=window.event),a="","undefined"!=typeof e.target&&"undefined"!=typeof e.target.className&&""!==e.target.className?a=e.target.getAttribute("class")||e.target.className:"undefined"!=typeof e.srcElement&&"undefined"!=typeof e.srcElement.className&&""!==e.srcElement.className&&(a=e.srcElement.className),$.inArray(a,["role","caret","sub-group-name","team-control-actions","product-selected"])!=-1||a.toString().match(/toggle-pulldown/)||($(this).find(".pulldown").removeClass("show"),ManagePeople.showInlineError()))}),$(".pjax-account").on("click","#sub-link",function(){$("#subscription-link").click()}),$(".pjax-account").on("click",".user-product [type=checkbox]",function(){ManagePeople.changeProductAccess($(this))}),$(".pjax-account").on("click",".product-filter li",function(){var e=this,a=$(e).parent();$(".active",a).removeClass("active"),$(e).addClass("active"),$(".empty-list").addClass("hide"),$(".team-title").removeClass("hide"),ManagePeople.showCompleteUserList(),$(e).hasClass("toggle-product")&&($(".noaccess-"+$(e).attr("id").replace("Filter","")).hide(),$(".joined, .invited").is(":visible")||ManagePeople.noResultsToShow($(e).text())),Analytics.sendDataToGA("Organisation","UseFilter","TestingView")}),$(".pjax-account").on("click","#nudge-modal-close",function(){var e=$("#contact_sales_modal");e.css("display","none"),$("body").css("overflow","auto")}),"undefined"==typeof ManageUsersBrowserStack||!ManageUsersBrowserStack.user||ManageUsersBrowserStack.user.upgrade_nudge_combined_product&&ManageUsersBrowserStack.user.upgrade_nudge_app_combined_product||setTimeout(function(){ManagePeople.changeProductDropDownLabel()},0)},showInlineError:function(){var e,a,n=ManagePeople.isCombinedTeam?".combined_product":".select-product",s=$(n+" [type=checkbox]"),t=s.closest(".product-access");s.is(":visible")?t.removeClass("no-product-selected"):(e=$(n+" input:checked"),a=$(n+" input:disabled"),a.length===s.length||e.length?t.removeClass("no-product-selected"):t.addClass("no-product-selected"))},hideAllErrors:function(){$(".product-selected").closest(".product-access").removeClass("no-product-selected"),$(".license-limit-reached-error").addClass("hide")},changeProductDropDownLabel:function(){var e,a=ManagePeople.isCombinedTeam?".combined_product":".select-product",n=$(a+" [type=checkbox]");n.each(function(){this.disabled?$(this).closest(".user-perm-wrapper").removeClass("nohover"):$(this).closest(".user-perm-wrapper").addClass("nohover")});var s="";n.length&&(e=$(a+" input:checked"),n.length===e.length?s="All Products":e.each(function(){s+=$('label[for="'+this.id+'"]').html()+", "}),s?$(".input-prepend #addMember").removeAttr("disabled","disabled"):(s="Assign access",$(".input-prepend #addMember").attr("disabled","disabled")),s=s.replace(/(^\s*,)|(,\s*$)/g,""),$(".product-selected").text(s.length>12?s.slice(0,12)+"...":s))},showCompleteUserList:function(){$(".joined").show(),$(".invited").show()},noResultsToShow:function(e){$(".empty-list").removeClass("hide").html("You haven't given "+e.toLowerCase()+" access to any user yet!"),$(".team-title").addClass("hide")},changeSelectedProduct:function(e){$(e).addClass("sel");var a=$(e).find(".user-perm").text();$(".product-selected").html(a)},getCheckedProducts:function(){var e="",a=$(".product-checkbox:checked");return a.length==$(".product-checkbox").length?"All Products":(a.each(function(){var a=$(this).attr("id");e+=$('label[for="'+a+'"]').html()+", "}),e.slice(0,e.length-2))},handleError:function(e){var a,n="";500==e.status?n=Messages.somethingWentWrong:(a=JSON.parse(e.responseText),n=void 0==a.message?Messages.somethingWentWrong:a.message),jQuery.bsAlert.alert({text:n,alertType:"error",timeout:!1,htmlMessage:!0})},removeSubteamElem:function(e){var a=$(e).parents("tr").first(),n=a.data("team-name"),s=$("tr[data-team-name='"+n+"']");1==s.length&&s.hasClass("manage-users-table-subgroup")&&s.remove()},removeUser:function(e){var a=1==$(".manage-users-table-row-item").length,n=!0;$(e).hasClass("self_remove")&&(n=window.confirm("WARNING: Are you sure you want to remove yourself from the group?")),n&&$.ajax({url:$(e).prop("href"),type:"delete",dataType:"json",success:function(n){var s;n.success?($(".input-prepend #addMember").removeProp("disabled style").removeClass("disabled"),n.disable_invite&&$("#addMember").prop("disabled","disabled"),$("#manage-users-no-invites-alert").removeClass("show").addClass("hide"),$("#manage-users-alert .close").is(":visible")&&$("#manage-users-alert").removeProp("style").removeClass("show hiding").addClass("hide").find("span").html(""),n.self_removed?(jQuery.bsAlert.alert({text:Messages.userSelfRemoved,alertType:"success"}),window.location.href=Config.generate_url("/dashboard","live")):(a&&$(e).parents(".listing").prev().addClass("hide"),$(e).parents("tr").first().fadeOut(250).remove(),jQuery.bsAlert.alert({text:Messages.userRemoved,alertType:"success"}),s={},ManagePeople.isCombinedTeam?(s.live_testing=s.screenshot=s.automate=$(e).parent().find(".combined_product_perm [type='checkbox']").prop("checked")?1:0,s.app_live_testing=$(e).parent().find(".app_combined_product_perm [type='checkbox']").prop("checked")?1:0):(s.live_testing=$(e).parents("tr").find(".live_testing_perm [type='checkbox']").prop("checked")?1:0,s.screenshot=$(e).parents("tr").find(".screenshot_perm [type='checkbox']").prop("checked")?1:0,s.automate=$(e).parents("tr").find(".automate_perm [type='checkbox']").prop("checked")?1:0,s.app_live_testing=$(e).parents("tr").find(".app_live_testing_perm [type='checkbox']").prop("checked")?1:0,s.app_automate=$(e).parents("tr").find(".app_automate_perm [type='checkbox']").prop("checked")?1:0),ManagePeople.removeSubteamElem(e),ManagePeople.updateUserCountAndValidations(s,"remove"),ManagePeople.changeProductDropDownLabel(),ManagePeople.hideAllErrors(),TeamPage.manageUsersTableBindings())):jQuery.bsAlert.alert({text:n.message,alertType:"error",timeout:!1})},error:function(e){var a;a=JSON.parse(e.responseText),$(".input-prepend").append(a),jQuery.bsAlert.alert({text:a.message,alertType:"error",timeout:!1})}})},addUser:function(e,a){var n,s,t,o;return ManagePeople.validateUser()&&(s=$("#source_product"),$("#invite_to_group").addClass("in-progress"),$("#addMember").val("Sending...").prop("disabled","disabled").addClass("disabled"),$("#manage-users-alert .close").is(":visible")&&$("#manage-users-alert").removeProp("style").removeClass("show hiding").addClass("hide").find("span").html(""),s.val()||s.val(function(){return $(e).find('input[name="live_testing_invite"]').prop("checked")?"live_testing":$(e).find('input[name="automate_invite"]').prop("checked")?"automate":$(e).find('input[name="screenshot_invite"]').prop("checked")?"screenshot":$(e).find('input[name="app_live_testing_invite"]').prop("checked")?"app_live_testing":$(e).find('input[name="app_automate_invite"]').prop("checked")?"app_automate":""}()),t=0==window.location.host.indexOf("live"),o=0==window.location.host.indexOf("app-live"),n=$(e).serialize(),jQuery.each(a,function(e,a){n+="&"+e+"="+a}),$.ajax({url:$(e).prop("action"),type:"post",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")},data:n,dataType:"script",complete:function(){$("#invite_to_group").removeClass("in-progress"),$("#addMember").val("Invite"),(t||o)&&($(".input-prepend").find(" #addMember").removeProp("disabled style").removeAttr("disabled"),jQuery(".invite-modal-overlay, .invite-modal").addClass("hide"),ManagePeople.addUserUpgradeModalSuccessCallback(),TeamPage.manageUsersTableBindings())}})),!1},addUserUpgradeModalSuccessCallback:function(){jQuery("body").on("ajax:success",".upgrade-modal #order-form",function(e,a){var n;jQuery(".mfp-close").unbind("click",!1),a.success?(jQuery(".invite-modal-overlay").find(".invite-modal").removeClass("hide"),WebEventTracker.logEvent([],EDS.webEvents,"SuccessfulUpgrade_InviteYourTeam_LiveDashboard",{}),jQuery.magnificPopup.close({items:{src:jQuery("#cart-modal")},type:"inline",closeOnBgClick:!1,enableEscapeKey:!1,showCloseBtn:!1}),ManagePeople.notifyInviteResponse(a.message,"success"),n={},n.from="purchase_modal",ManagePeople.addUser($("#invite_to_group"),n),Analytics.sendDataToGA("Organisation","ClickInvite","InviteTeam_Email"),InviteModal.hideInviteModal()):ManagePeople.notifyInviteResponse(a.message,"error")})},addUserSuccessCallBack:function(e,a){var n,s,t;if(a){for(s=Object.keys(e.invite_status),t=0;t<s.length;t++)WebEventTracker.logEvent([],EDS.webEvents,"SentInvite",{invited_user_exists:e.user_existence[t],invited_user_email:s[t],invited_user_role:e.role,product:e.source_product,source:userOnLiveDashboard()?"InviteMyTeamModal":"UserManagementPage"});n={},n.live_testing=e.live_testing,n.screenshot=e.screenshot,n.automate=e.automate,n.app_live_testing=e.app_live_testing,n.app_automate=e.app_automate,ManagePeople.showStatusForNewInvites(e.invite_status,n),ManagePeople.updateUserCountAndValidations(n,"add"),"false"!=e.pending?$(".input-prepend #addMember").removeProp("disabled style").removeClass("disabled"):$("#manage-users-no-invites-alert").removeClass("hide").addClass("show"),$("#invite_to_group")[0].reset()}else $(".input-prepend").find("#addMember").removeAttr("disabled").removeClass("disabled")},validateUser:function(){inlineError.removeErrors("#invite_to_group");var e,a,n,s,t=jQuery("#invite_to_group + .error-message");t.length&&t.remove();var o=$.map($.trim($("#invite_to_group input[type='text']").val().replace(/ /g,"")).split(","),function(e){return e.toLowerCase()});if(1==o.length&&""==o[0])return inlineError.showError(jQuery("#appendedPrependedInput"),Messages.noEmail,!0),!1;if(o.length>50)return inlineError.showError(jQuery("#appendedPrependedInput"),Messages.tooManyEmails,!0),!1;var r=!0,i=[],d=[],l=[],c="";return l=$(".name #email").map(function(){return $(this).text().trim().toLowerCase()}),$.each(o,function(e,a){if(""!=a){$.inArray(a,l)!=-1&&(d.push(a),r=!1);var n=ManagePeople.invalidEmail(a);n.isInvalid&&(i.push(a),r=!1,c!==Messages.emailValidationErrors.modalInvalidEmail&&(c=n.errorMessage))}}),0==r?(e="",a=[],i.length>0&&(n=c,0===$("#invite-modal.dashboard-invite").length&&0===$(".invite-modal.accounts-profile-invite").length?(n+=i.join(", "),e="manage-team"):n===Messages.emailValidationErrors.modalInvalidEmail?n=Messages.invalidEmail:n===Messages.emailValidationErrors.modalInvalidCharacters&&(n=Messages.invalidCharacterEmail),a.push(n)),d.length>0&&a.push(Messages.userPresent+": "+d.join(", ")),e&&"manage-team"==e?(s=jQuery("#invite_to_group"),$("#appendedPrependedInput",s).addClass("error-border"),inlineError.showError(jQuery("#appendedPrependedInput"),a.join(" "),!0),!1):(inlineError.showError(jQuery("#appendedPrependedInput"),a.join(" "),!0),!1)):r},invalidEmail:function(e){return{isInvalid:e.indexOf("@")===-1||e.indexOf(".")===-1||e.indexOf("..")!==-1||emailContainsNonLatinCharacters(e),errorMessage:emailContainsNonLatinCharacters(e)?Messages.emailValidationErrors.modalInvalidCharacters:Messages.emailValidationErrors.modalInvalidEmail}},changeProductAccess:function(e){if("disabled"!=$(e).prop("disabled")){$("#memberList").addClass("disable-pointer");var a=$(e).parents(".member").find("#email").text(),n=$(e).prop("name"),s=$(e).is(":checked"),t=$(e).data("type");ManagePeople.selectedProduct&&(ManagePeople.selectedProduct=null),$(".manage-users-section-overlay").removeClass("hide").addClass("show"),$.ajax({url:Config.generate_url("/user/change-product-access"),type:"post",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript"),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},data:{email:a,product:n,grant_perm:s,type:t},success:function(a){var t,o;$(".manage-users-section-overlay").removeClass("show").addClass("hide"),a.success?(TeamPage.activateUnlimitedBanner(a.data.show_unlimited_banner),jQuery.bsAlert.alert({text:a.message,alertType:"success",htmlMessage:!0}),t={},ManagePeople.isCombinedTeam?ManagePeople.combinedProducts[n].forEach(function(e){t[e]=1}):t[n]=1,o=s?"add":"remove",ManagePeople.updateUserCountAndValidations(t,o),"undefined"==typeof ManageUsersBrowserStack||!ManageUsersBrowserStack.user||ManageUsersBrowserStack.user.upgrade_nudge_combined_product&&ManageUsersBrowserStack.user.upgrade_nudge_app_combined_product||ManagePeople.changeProductDropDownLabel(),ManagePeople.hideAllErrors()):(jQuery.bsAlert.alert({text:a.message,alertType:"error",timeout:!1}),$(e).prop("checked",!s)),$("#memberList").removeClass("disable-pointer")},error:function(a){$(".manage-users-section-overlay").removeClass("show").addClass("hide"),$(e).prop("checked",!s),$("#memberList").removeClass("disable-pointer");var n,t,o,r=$(e).attr("name"),i=a;if("undefined"!=typeof ManageUsersBrowserStack&&ManageUsersBrowserStack.user&&ManageUsersBrowserStack.user["upgrade_nudge_"+r]&&i.responseJSON&&i.responseJSON.data&&i.responseJSON.data.insufficient_licenses===!0){if(jQuery("<span />",{"class":"manage-accounts-overlay"}).appendTo(jQuery(".pjax-account")),t=$(e).closest(".member"),0==t.length)return;if(o=t.find("#email"),0==o.length)return;n=o.text(),i={change_product_access:!0,email:n},"combined_product"==r?(i={change_product_access:!0,email:n,combined_product_invite:1,live_testing_invite:1,automate_invite:1,screenshot_invite:1},Object.assign(i,{combined_product_invite:1,live_testing_invite:1,automate_invite:1,screenshot_invite:1})):"app_combined_product"==r&&(i={change_product_access:!0,email:n,app_combined_product_invite:1,app_live_testing_invite:1,app_automate_invite:1}),i.upgrade_modal_source="Product access checkbox",$.ajax({url:$("#invite_to_group").prop("action"),type:"post",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")},data:i,dataType:"script",complete:function(){jQuery(".pjax-account").find(".manage-accounts-overlay").remove(),$(".manage-user-upgrade").length>0&&(ManagePeople.selectedProduct=e)}})}else ManagePeople.handleError(i)}})}},addRoleToNewInvite:function(e){$(".input-append .add-role li").removeClass("sel"),$(e).addClass("sel");var a=$(e).find(".role-name").text().length>6?$(e).find(".role-name").text().slice(0,6)+"...":$(e).find(".role-name").text();$(e).parents(".user-role").first().find(".role").html(a),$(e).parents(".pulldown").hide(),$("#add-role").val($(e).find(".role-name").text()),Analytics.sendDataToGA("Organisation","SelectRole"+$(e).find(".role-name").text(),"InviteTeam_Email")},addSubTeamToNewInvite:function(e){$(".input-append .add-group li").removeClass("sel"),$(e).addClass("sel"),$(e).parents(".user-group").find(".sub-group-name").text($(e).data("subgrp-name")),$(e).parents(".pulldown").hide(),$("#sub_group").val($(e).data("subgrp-id"))},changeRole:function(e){$(e).addClass("sel").siblings("tr").removeClass("sel");var a=$(e).find(".role-name").html(),n=$(e).parents(".user-role").first().find(".role").text();a!=n&&($(e).parents(".user-role").first().find(".role").html(a),$.post(Config.generate_url("/user/change_role"),{id:$(e).data("id"),role:a,type:$(e).data("type")},function(e){1==e.success?(TeamPage.manageUsersTableBindings(),jQuery.bsAlert.alert({text:Messages.roleUpdated,alertType:"success"}),Analytics.sendDataToGA("Organisation","SwitchRole","ManageUsers"),e.sso?setTimeout(function(){window.location.href=e.sso.logout_url},1e3):"Owner"==a&&setTimeout(function(){window.location.href=Config.generate_url("/users/sign_in")},1e3)):jQuery.bsAlert.alert({text:e.message,alertType:"error",timeout:!1})}).error(function(e){ManagePeople.handleError(e),TeamPage.manageUsersTableBindings()}))},changeSubTeam:function(e){var a,n=$(e).siblings("tr .sel").data("subgrp-id");if(void 0==n)return!1;$(e).addClass("sel").siblings("tr").removeClass("sel");var s=$(e).data("subgrp-id");return s!=n&&(a=$(e).parents(".pulldown"),$.ajax({url:Config.generate_url("/user/change-group"),type:"POST",beforeSend:function(e){e.setRequestHeader("Accept","text/javascript")},dataType:"script",data:{id:a.data("id"),subGrp:s,type:a.data("type")},success:function(){ManagePeople.changeProductDropDownLabel(),TeamPage.manageUsersTableBindings()},error:function(){}})),!1},showSuccessMessage:function(e){Messages.showMessage(e,"success",null,2e3)},showErrorMessage:function(e){Messages.showMessage(e,"error")},hideErrorMessage:function(){$("#manage-users-alert").removeClass("show").addClass("hide")},showMaxUsersReachedError:function(e,a){e?($(".live-limit").removeClass("hide"),$("#live_testing_list, #live_testing_list .user-limit").addClass("error"),"undefined"!=typeof ManageUsersBrowserStack&&ManageUsersBrowserStack.user&&!ManageUsersBrowserStack.user.upgrade_nudge_combined_product&&$("#live_testing_invite").prop("checked",!1).prop("disabled",!0)):($(".live-limit").addClass("hide"),$("#live_testing_list, #live_testing_list .user-limit").removeClass("error"),$("#live_testing_invite").prop("checked",!0).prop("disabled",!1)),a?($(".screenshot-limit").removeClass("hide"),$("#screenshot_list, #screenshot_list .user-limit").addClass("error"),"undefined"!=typeof ManageUsersBrowserStack&&ManageUsersBrowserStack.user&&!ManageUsersBrowserStack.user.upgrade_nudge_combined_product&&$("#screenshot_invite").prop("checked",!1).prop("disabled",!0)):($(".screenshot-limit").addClass("hide"),$("#screenshot_list, #screenshot_list .user-limit").removeClass("error"),$("#screenshot_invite").prop("checked",!0).prop("disabled",!1))},notifyInviteResponse:function(e,a){$("#invite-modal.dashboard-invite").length>0?showNotification(e,a):jQuery.bsAlert.alert({text:e,alertType:a})},showStatusForNewInvites:function(e){var a=0,n=[];$.each(e,function(e,s){"failed"==s?n.push(e):a+=1,1==a?ManagePeople.notifyInviteResponse(Messages.userAdded,"success"):a>1&&ManagePeople.notifyInviteResponse(a+Messages.usersAdded,"success"),n.length>0&&ManagePeople.notifyInviteResponse("Invites failed for following users: "+n.join(", "),"error")})},get_license_count:function(e){var a=$("#"+e+"_licenses").html();if("Unlimited"==a)return a;var n=$("#"+e+"_licenses_allowed").html();return[parseInt(a,10),parseInt(n,10)]},lockAddAccessToProduct:function(e){function a(e){if("undefined"==typeof ManageUsersBrowserStack||!ManageUsersBrowserStack.user||!ManageUsersBrowserStack.user["upgrade_nudge_"+e]){$("[name='"+e+"']").not(":checked").prop("disabled","disabled");var a=$("#"+e+"_invite");a.prop("checked",!1).prop("disabled","disabled"),a.next().next().css("display","block")}}var n;this.isCombinedTeam&&(n=function(){return"live_testing"==e?"combined_product":"app_live_testing"==e?"app_combined_product":""}(),a(n)),a(e)},unlockAddAccessToProduct:function(e){function a(e){$("[name='"+e+"']").prop("disabled",!1);var a=$("#"+e+"_invite");a.prop("checked",!0).prop("disabled",!1),a.next().next().css("display","none"),$("#"+e+"_list, #"+e+"_list .user-limit").removeClass("error"),$(".input-prepend #addMember").removeAttr("disabled")}var n;$("#appendedPrependedInput").hasClass("without-role")||(this.isCombinedTeam&&(n=function(){return"live_testing"==e?"combined_product":"app_live_testing"==e?"app_combined_product":""}(),a(n)),a(e))},set_license_count:function(e,a,n){var s="#"+e+"_licenses";$(s).html(a);var t="#"+e+"_licenses_remaining";$(t).html(n-a)},get_updated_count:function(e,a,n){return void 0==n&&(n=1),"add"==a?e+n:e-n},updateUserCountAndValidations:function(e,a){var n,s,t=["live_testing","screenshot","automate","app_live_testing","app_automate"],o={},r={};for(n=0;n<t.length;n++)r[t[n]]=ManagePeople.get_license_count(t[n]),s=ManagePeople.get_updated_count(r[t[n]][0],a,e[t[n]]||0),e[t[n]]>0&&r[t[n]].length>1&&ManagePeople.set_license_count(t[n],s,r[t[n]][1]),s==r[t[n]][1]&&(o[t[n]]=!0);void 0!=o.live_testing&&void 0!=o.screenshot?ManagePeople.showMaxUsersReachedError(!0,!0):void 0==o.live_testing&&void 0==o.screenshot?ManagePeople.showMaxUsersReachedError(!1,!1):void 0!=o.live_testing?ManagePeople.showMaxUsersReachedError(!0,!1):void 0!=o.screenshot&&ManagePeople.showMaxUsersReachedError(!1,!0)}};ManagePeople.init();var UpdateBillingInfo={bill_info:function(){$("#ajax-modal").on("submit","#update-billing-info-form",function(){return!1}),$("#ajax-modal").on("click",".update-billing-info",function(){return $(".update-billing-info").val("Updating...").prop("disabled",!0).addClass("disabled"),$.ajax({url:$("#update-billing-info-form").prop("action"),type:"post",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},data:$("#update-billing-info-form").serialize(),dataType:"json",success:function(){$(".update-billing-info").val("Update").prop("disabled",!1).removeClass("disabled"),$(".billing-info-alert").removeClass("hide").addClass("show").html("Updated successfully<span class='close'>x</span>")},error:function(){$(".update-billing-info").val("Update").prop("disabled",!1).removeClass("disabled")}}),!1})}};UpdateBillingInfo.bill_info();var LiveUpgradeNudge={combinedSwitchToAnnualProration:function(){$(document).on("click","#viewCombinedCalc",function(){var e=this;$(this).hasClass("caret-down")?$("#prorationCalculations").slideDown(250,"easeInCubic",function(){$(this).addClass("show").removeClass("hide"),$(e).addClass("caret-up").removeClass("caret-down")}):$(this).hasClass("caret-up")&&$("#prorationCalculations").slideUp(250,"easeOutCubic",function(){$(this).addClass("hide").removeClass("show"),$(e).addClass("caret-down").removeClass("caret-up")})})}};LiveUpgradeNudge.combinedSwitchToAnnualProration();var UnlimitedBanner=function(){function e(){var e=$(".unlimited-users-banner.dashboard"),n=$(".unlimited-users-banner.inner-modal"),s=$(".unlimited-users-banner.bug-report");e.find(".row-banner .unlimited-users-banner__cta.state-default").on("click",function(){return n.addClass("hide"),s.addClass("hide"),WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner clicked_LiveDashboard"),$(".unlimited-users-banner__parent-modal").removeClass("unlimited-users-banner__parent-modal"),redirectToCSF({utm_source:"LiveDashboardTeamPlansNudge"}),!1}),n.find(".row-banner .unlimited-users-banner__cta.state-default").on("click",function(){return e.addClass("hide"),s.addClass("hide"),WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner clicked_InviteYourTeam_LiveDashboard"),redirectToCSF({utm_source:"LiveDashboard_InviteYourTeam_TeamPlansNudge"}),!1}),s.find(".row-banner .unlimited-users-banner__cta.state-default").on("click",function(){return e.addClass("hide"),n.addClass("hide"),$(".unlimited-users-banner__parent-modal").removeClass("unlimited-users-banner__parent-modal"),WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner clicked_ReportBugsSection_LiveDashboard"),redirectToCSF({utm_source:"LiveDashboard_ReportBugsSection_TeamPlansNudge"}),!1}),e.find(".row-banner .unlimited-users-banner__close").on("click",function(){return a(e,window.location.hostname,"Team-wide banner closed_LiveDashboard"),e.addClass("hide"),!1}),n.find(".row-banner .unlimited-users-banner__close").on("click",function(){return a(n,window.location.hostname+"-invite-team","Team-wide banner closed_InviteYourTeam_LiveDashboard"),n.addClass("hide"),$(".unlimited-users-banner__parent-modal").removeClass("unlimited-users-banner__parent-modal"),!1}),s.find(".row-banner .unlimited-users-banner__close").on("click",function(){return a(s,window.location.hostname+"-report-bug","Team-wide banner closed_ReportBugsSection_LiveDashboard"),s.addClass("hide"),!1}),e.find(".row-banner .unlimited-users-banner__cta.state-success").on("click",function(){return e.addClass("hide"),!1}),n.find(".row-banner .unlimited-users-banner__cta.state-success").on("click",function(){return n.addClass("hide"),$(".unlimited-users-banner__parent-modal").removeClass("unlimited-users-banner__parent-modal"),!1}),s.find(".row-banner .unlimited-users-banner__cta.state-success").on("click",function(){return s.addClass("hide"),!1}),e.hasClass("show")&&WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner triggered_LiveDashboard"),$(".uu-invite-tooltip-wrapper").on("click",function(){$(".unlimited-users-banner__parent-modal").size()>0&&WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner viewed_InviteYourTeam_LiveDashboard")}),$("#dockReportBug").on("click",function(){s.hasClass("show")&&!s.hasClass("hide")&&WebEventTracker.logEvent([],EDS.webEvents,"Team-wide banner viewed_ReportBugsSection_LiveDashboard")})}function a(e,a,n){e.hasClass("success-message")||($.ajax({beforeSend:function(e){e.setRequestHeader("Accept","application/json")},url:Config.generate_url("/user/record-banner-dismissed"),type:"post",data:{current_page:a}}),WebEventTracker.logEvent([],EDS.webEvents,n))}return{initUnlimitedBanner:e}}();UnlimitedBanner.initUnlimitedBanner();
var CombinedPricingActivity={logEvent:function(t,n,s,i,e,o,c,p,a,r,u){var _;_={opts:{}},_.opts.event_type=t,_.opts.request_url=n,_.opts.plan_name=i,_.opts.plan_id=e,_.opts.user_id=s,_.opts.license_count=o,_.opts.billing_cycle=c,_.opts.tracking_id=p,_.opts.product=a,_.opts.version=r,_.opts.user_status=u,CombinedPricingActivity.sendStats(_)},sendStats:function(t){$.ajax({url:Config.generate_url("/combined_line_items/log_pricing_analytics","accounts"),type:"POST",data:t,success:function(){}})}};
var browserExtension={id:"undefined"==typeof PassExtensionDetails?"":PassExtensionDetails.chromeExtensionId,type:null,os:null,init:function(e){browserExtension.type=e,browserExtension.version=PassExtensionDetails.extensionVersions[e],"chrome"==browserExtension.type?browserExtension.checkIfInstalled(function(e){e?($(".if-extension-installed").removeClass("hide").addClass("show"),$(".if-extension-not-installed").removeClass("show").addClass("hide")):($(".if-extension-installed").removeClass("show").addClass("hide"),$(".if-extension-not-installed").removeClass("hide").addClass("show"))}):(browserExtension.messengerApi=new FirefoxMessengerApi,browserExtension.checkIfInstalled(function(e){e?($(".if-extension-installed").removeClass("hide").addClass("show"),$(".if-extension-not-installed").removeClass("show").addClass("hide")):($(".if-extension-installed").removeClass("show").addClass("hide"),$(".if-extension-not-installed").removeClass("hide").addClass("show"))}))},sendMessage:function(e,s){"chrome"===browserExtension.type&&"undefined"!=typeof chrome&&"undefined"!=typeof chrome.runtime?chrome.runtime.sendMessage(browserExtension.id,e,s):"firefox"==browserExtension.type&&browserExtension.messengerApi&&browserExtension.messengerApi.sendMessage(e,s)},checkIfInstalled:function(e){browserExtension.sendMessage({type:"installStatus"},function(s){s&&s.installed&&s.version&&parseInt(browserExtension.installedVersion,10)<parseInt(s.version,10)&&(browserExtension.installedVersion=parseInt(s.version,10));var n=!1;n=!!(s&&s.installed&&s.version&&parseInt(s.version,10)>=parseInt(browserExtension.version,10)),e(n)})}};"undefined"!=typeof PassExtensionDetails&&"chrome"==$.browser.name&&parseInt($.browser.version,10)>=31&&"undefined"!=typeof chrome?browserExtension.init("chrome"):"undefined"!=typeof PassExtensionDetails&&PassExtensionDetails&&"firefox"==$.browser.name&&parseInt($.browser.version,10)>=22&&browserExtension.init("firefox");
//# sourceMappingURL=https://browserstack-frontend-sourcemaps.s3.amazonaws.com/production/assets/bsjs.js.map
